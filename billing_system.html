<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>University of Ilorin Billing System</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; }
    h2 { color: #2c3e50; }
    form, .statement { margin-bottom: 30px; }
    label { display: block; margin-top: 10px; }
    input, select { margin-top: 5px; }
    .section { border: 1px solid #ccc; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
  </style>
</head>
<body>
  <h1>University of Ilorin Billing System</h1>
  <div class="section">
    <h2>Add Student</h2>
    <form id="studentForm">
      <label>Student ID: <input type="text" id="studentId" required></label>
      <label>Name: <input type="text" id="studentName" required></label>
      <label>Faculty:
        <select id="faculty" required>
          <option value="">Select Faculty</option>
          <option value="Agriculture">Agriculture</option>
          <option value="Arts">Arts</option>
          <option value="Engineering">Engineering</option>
          <option value="Science">Science</option>
          <option value="Social Sciences">Social Sciences</option>
        </select>
      </label>
      <label>Department:
        <select id="department" required>
          <option value="">Select Department</option>
        </select>
      </label>
      <button type="submit">Add Student</button>
    </form>
  </div>

  <div class="section">
    <h2>Add Charge</h2>
    <form id="chargeForm">
      <label>Description: <input type="text" id="chargeDesc" required></label>
      <label>Amount: <input type="number" id="chargeAmount" required></label>
      <button type="submit">Add Charge</button>
    </form>
  </div>

  <div class="section">
    <h2>Record Payment</h2>
    <form id="paymentForm">
      <label>Amount: <input type="number" id="paymentAmount" required></label>
      <label>Method: <input type="text" id="paymentMethod" required></label>
      <button type="submit">Record Payment</button>
    </form>
  </div>

  <div class="section statement" id="statementSection" style="display:none;">
    <h2>Billing Statement</h2>
    <div id="statementContent"></div>
  </div>

  <script>
    // Faculties and departments
    const FACULTIES = {
      "Agriculture": ["Agricultural Economics", "Animal Science", "Crop Protection"],
      "Arts": ["English", "History", "Linguistics"],
      "Engineering": ["Civil Engineering", "Mechanical Engineering", "Electrical Engineering"],
      "Science": ["Biochemistry", "Chemistry", "Physics"],
      "Social Sciences": ["Economics", "Political Science", "Psychology"]
    };

    // Student data
    let student = null;
    let charges = [];
    let payments = [];

    // Populate departments based on faculty
    document.getElementById('faculty').addEventListener('change', function() {
      const faculty = this.value;
      const deptSelect = document.getElementById('department');
      deptSelect.innerHTML = '<option value="">Select Department</option>';
      if (FACULTIES[faculty]) {
        FACULTIES[faculty].forEach(dept => {
          const opt = document.createElement('option');
          opt.value = dept;
          opt.textContent = dept;
          deptSelect.appendChild(opt);
        });
      }
    });

    // Add student
    document.getElementById('studentForm').addEventListener('submit', function(e) {
      e.preventDefault();
      student = {
        id: document.getElementById('studentId').value,
        name: document.getElementById('studentName').value,
        faculty: document.getElementById('faculty').value,
        department: document.getElementById('department').value
      };
      charges = [];
      payments = [];
      showStatement();
    });

    // Add charge
    document.getElementById('chargeForm').addEventListener('submit', function(e) {
      e.preventDefault();
      if (!student) return alert('Add student first!');
      charges.push({
        description: document.getElementById('chargeDesc').value,
        amount: parseFloat(document.getElementById('chargeAmount').value)
      });
      showStatement();
    });

    // Record payment
    document.getElementById('paymentForm').addEventListener('submit', function(e) {
      e.preventDefault();
      if (!student) return alert('Add student first!');
      payments.push({
        amount: parseFloat(document.getElementById('paymentAmount').value),
        method: document.getElementById('paymentMethod').value,
        date: new Date().toISOString().split('T')[0]
      });
      showStatement();
    });

    // Show statement
    function showStatement() {
      if (!student) return;
      document.getElementById('statementSection').style.display = 'block';
      let html = `<b>Name:</b> ${student.name} <br>
                  <b>ID:</b> ${student.id} <br>
                  <b>Faculty:</b> ${student.faculty} <br>
                  <b>Department:</b> ${student.department} <br>
                  <b>Charges:</b><ul>`;
      let totalCharges = 0;
      charges.forEach(c => {
        html += `<li>${c.description}: ₦${c.amount.toFixed(2)}</li>`;
        totalCharges += c.amount;
      });
      html += `</ul><b>Payments:</b><ul>`;
      let totalPayments = 0;
      payments.forEach(p => {
        html += `<li>${p.date} [${p.method}]: ₦${p.amount.toFixed(2)}</li>`;
        totalPayments += p.amount;
      });
      html += `</ul><b>Current Balance:</b> ₦${(totalCharges - totalPayments).toFixed(2)}`;
      document.getElementById('statementContent').innerHTML = html;
    }
  </script>
</body>
</html>