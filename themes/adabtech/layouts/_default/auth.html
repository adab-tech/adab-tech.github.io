{{ define "main" }}
<div class="auth-container">
  <div class="auth-card">
    <h1>{{ .Title }}</h1>
    <p class="auth-description">{{ if eq .Title "Sign In" }}Sign in to access exclusive content and features{{ else if eq .Title "Sign Up" }}Create an account to access exclusive content and features{{ else }}Manage your account settings and preferences{{ end }}</p>
    
    <!-- Clerk Component Container -->
    <div id="clerk-{{ if eq .Title "Sign In" }}signin{{ else if eq .Title "Sign Up" }}signup{{ else }}user-profile{{ end }}"></div>
    
    {{ if eq .Title "Sign In" }}
    <p class="auth-footer">
      Don't have an account? <a href="{{ "/signup/" | relURL }}">Sign up</a>
    </p>
    {{ else if eq .Title "Sign Up" }}
    <p class="auth-footer">
      Already have an account? <a href="{{ "/signin/" | relURL }}">Sign in</a>
    </p>
    {{ end }}
  </div>
</div>

<style>
.auth-container {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 60vh;
  padding: 2rem 1rem;
}

.auth-card {
  max-width: 500px;
  width: 100%;
  background: var(--card-bg, #fff);
  padding: 2.5rem;
  border-radius: 12px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.auth-card h1 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 2rem;
  text-align: center;
}

.auth-description {
  text-align: center;
  color: var(--text-muted, #666);
  margin-bottom: 2rem;
}

.auth-footer {
  text-align: center;
  margin-top: 1.5rem;
  color: var(--text-muted, #666);
}

.auth-footer a {
  color: var(--primary-color, #0066cc);
  text-decoration: none;
}

.auth-footer a:hover {
  text-decoration: underline;
}
</style>

<!-- Clerk JavaScript SDK -->
<script>
  // Initialize Clerk when DOM is ready
  document.addEventListener('DOMContentLoaded', function() {
    // Check if Clerk is loaded
    if (typeof Clerk !== 'undefined') {
      const clerkPublishableKey = '{{ getenv "CLERK_PUBLISHABLE_KEY" }}';
      
      if (clerkPublishableKey) {
        // Initialize Clerk
        const clerk = new Clerk(clerkPublishableKey);
        clerk.load().then(() => {
          // Mount appropriate component based on page
          const signinDiv = document.getElementById('clerk-signin');
          const signupDiv = document.getElementById('clerk-signup');
          const profileDiv = document.getElementById('clerk-user-profile');
          
          if (signinDiv) {
            clerk.mountSignIn(signinDiv);
          }
          
          if (signupDiv) {
            clerk.mountSignUp(signupDiv);
          }
          
          if (profileDiv) {
            clerk.mountUserProfile(profileDiv);
          }
        });
      } else {
        console.warn('Clerk publishable key not found. Set CLERK_PUBLISHABLE_KEY environment variable.');
        // Show fallback message
        const authContainers = document.querySelectorAll('.auth-card');
        authContainers.forEach(container => {
          const clerkDiv = container.querySelector('[id^="clerk-"]');
          if (clerkDiv) {
            clerkDiv.innerHTML = '<div style="padding: 2rem; background: #f5f5f5; border-radius: 8px; text-align: center;"><p><strong>Authentication Not Configured</strong></p><p>To enable authentication, set up Clerk and add your CLERK_PUBLISHABLE_KEY environment variable.</p></div>';
          }
        });
      }
    }
  });
</script>
{{ end }}
