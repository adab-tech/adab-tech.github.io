<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dot Card — Business Card</title>
  <meta name="description" content="A compact dot-style business card. Download vCard, scan QR, or print." />
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#7c3aed;--muted:#9aa4b2;--white:#ffffff}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial; background:linear-gradient(180deg,#061124 0%, #071628 100%);color:var(--white)}
    .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
    .card{width:100%;max-width:420px;background:var(--card);border-radius:20px;padding:28px;box-shadow:0 8px 30px rgba(2,6,23,.6);position:relative}
    .dot{width:72px;height:72px;border-radius:50%;background:radial-gradient(circle at 30% 30%, #fff8 0%, transparent 10%),linear-gradient(135deg,var(--accent),#4f46e5);display:inline-block}
    .header{display:flex;gap:16px;align-items:center}
    .info{flex:1}
    h1{margin:0;font-size:20px;letter-spacing:-0.2px}
    p.role{margin:6px 0 0;color:var(--muted);font-size:13px}
    .links{display:flex;gap:10px;margin-top:16px;flex-wrap:wrap}
    .btn{background:transparent;border:1px solid rgba(255,255,255,.08);color:var(--white);padding:8px 12px;border-radius:10px;font-size:14px;text-decoration:none}
    .primary{background:linear-gradient(90deg,var(--accent),#4f46e5);border:0}
    .qr-section{display:flex;gap:16px;align-items:center;margin-top:18px}
    .qr{width:96px;height:96px;border-radius:8px;background:#fff;padding:8px;display:flex;align-items:center;justify-content:center}
    .meta{font-size:13px;color:var(--muted)}
    .actions{display:flex;gap:10px;margin-top:18px}
    .small{padding:8px 10px;font-size:13px}
    .wallet-note{margin-top:10px;font-size:12px;color:var(--muted)}
  details.wallet{margin-top:16px;border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:12px 12px}
  details.wallet > summary{cursor:pointer;list-style:none;font-size:14px}
  details.wallet > summary::-webkit-details-marker{display:none}
  .wallet-grid{display:grid;grid-template-columns:1fr;gap:10px;margin-top:10px}
  .field{display:flex;flex-direction:column;gap:6px}
  .field label{font-size:12px;color:var(--muted)}
  .field input{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);color:var(--white);border-radius:10px;padding:10px 12px;font-size:14px}
  .hint{font-size:12px;color:var(--muted);line-height:1.4}
  .toast{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#000;color:#fff;padding:10px 20px;border-radius:10px;font-size:14px;opacity:0;pointer-events:none;transition:opacity 0.3s}
  .toast.show{opacity:1}
  .toast{position:fixed;left:50%;bottom:18px;transform:translateX(-50%);background:rgba(15,23,36,.95);border:1px solid rgba(255,255,255,.08);padding:10px 12px;border-radius:12px;color:var(--white);font-size:13px;opacity:0;pointer-events:none;transition:opacity .2s ease}
  .toast.show{opacity:1}

    /* print styles */
    @media print{
      body{background:white;color:black}
      .wrap{padding:0}
      .card{box-shadow:none;border-radius:0;padding:20mm;width:100%;max-width:100%;}
      .btn,.actions{display:none}
      .qr{width:140px;height:140px}
    }

    /* responsive */
    @media (max-width:420px){.card{padding:20px}.dot{width:60px;height:60px}}
  </style>
</head>
<body>
  <div class="wrap">
    <article class="card" role="article" aria-label="Digital business card">
      <div class="header">
        <div class="dot" aria-hidden="true"></div>
        <div class="info">
          <h1 id="name">Your Name</h1>
          <p class="role" id="role">Your Title — Company</p>
        </div>
      </div>

      <div class="links" id="links">
        <a class="btn" id="phoneBtn" href="#">Phone</a>
        <a class="btn" id="emailBtn" href="#">Email</a>
        <a class="btn" id="siteBtn" href="#">Website</a>
        <a class="btn" id="linkedinBtn" href="#">LinkedIn</a>
        <a class="btn" id="githubBtn" href="#">GitHub</a>
      </div>

      <div class="qr-section">
        <div class="qr" id="qrWrap">
          <img id="qrImg" alt="QR code linking to this card" src="" width="96" height="96">
        </div>
        <div>
          <div class="meta" id="company">Company</div>
          <div class="meta" id="location">City, Country</div>
          <div class="actions">
            <button class="btn small" id="vcardBtn">Download vCard</button>
            <button class="btn small" id="shareBtn">Share</button>
            <button class="btn small" id="copyLinkBtn">Copy link</button>
            <button class="btn small" id="copyNfcBtn">Copy NFC URL</button>
            <button class="btn small" id="printSheetBtn">Print Sheet</button>
            <button class="btn small primary" id="printBtn">Print</button>
          </div>
          <div class="wallet-note">For NFC cards: program the chip with this URL. <button class="btn small" id="copyNfcBtn" type="button">Copy NFC URL</button></div>
        </div>
      </div>

      <details class="wallet" id="walletDetails">
        <summary><strong>NFC + print setup (no Apple Wallet needed)</strong></summary>
        <div class="wallet-grid">
          <div class="hint">
            This page is your “dot card”. You can:
            <ul>
              <li><strong>Print</strong> it (includes a QR code)</li>
              <li><strong>Share</strong> it by link</li>
              <li><strong>Program an NFC card</strong> to open this URL on tap</li>
            </ul>
          </div>
          <div class="field">
            <label for="nfcUrl">NFC URL (what the card should open)</label>
            <input id="nfcUrl" inputmode="url" placeholder="https://your-site/static/business-card.html" aria-label="NFC URL" />
            <div class="hint">Recommendation: keep this URL stable forever (don’t change it after printing/programming cards).</div>
          </div>
          <div class="hint">
            NFC chip guidance (typical): choose a URL-encoded NFC card/tag (often sold as “NTAG215/216”). Program an <strong>NDEF URL record</strong>
            with the URL above using a phone app (e.g., “NFC Tools”).
          </div>
        </div>
      </details>
    </article>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script>
    // === Customize these values ===
    const card = {
      name: 'Adamu Abubakar',
      role: 'Founder',
      company: 'Adab Technologies LLC',
      phone: '',
      email: 'info@adamu.tech',
      website: 'https://adamu.tech',
      location: 'Tuscaloosa, United States',
      linkedin: 'https://www.linkedin.com/in/adamudanjuma',
      github: 'https://github.com/adab-tech'
    };
    // =================================

    // Populate UI
    document.getElementById('name').textContent = card.name;
    document.getElementById('role').textContent = card.role + ' — ' + card.company;
    document.getElementById('company').textContent = card.company;
    document.getElementById('location').textContent = card.location;

    const phoneBtn = document.getElementById('phoneBtn');
    phoneBtn.href = 'tel:' + card.phone.replace(/\s+/g,'');
    phoneBtn.textContent = card.phone;

    const emailBtn = document.getElementById('emailBtn');
    emailBtn.href = 'mailto:' + card.email;
    emailBtn.textContent = card.email;

    const siteBtn = document.getElementById('siteBtn');
    siteBtn.href = card.website;
    siteBtn.textContent = (new URL(card.website)).hostname.replace('www.','');

    const linkedinBtn = document.getElementById('linkedinBtn');
    linkedinBtn.href = card.linkedin;
    linkedinBtn.textContent = 'LinkedIn';

    const githubBtn = document.getElementById('githubBtn');
    githubBtn.href = card.github;
    githubBtn.textContent = 'GitHub';

    // Hide phone if not provided
    if (!card.phone) document.getElementById('phoneBtn').style.display = 'none';

    const toast = document.getElementById('toast');
    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add('show');
      window.clearTimeout(showToast._t);
      showToast._t = window.setTimeout(()=>toast.classList.remove('show'), 1400);
    }

    // The URL that QR + NFC should point to
    const shareUrl = (typeof location !== 'undefined') ? location.href : card.website;

    // Populate NFC URL input
    document.getElementById('nfcUrl').value = shareUrl;

    // Offline QR generation (no external API)
    // Note: this uses a tiny runtime dependency loaded from a CDN.
    const qrImg = document.getElementById('qrImg');
    async function renderQr(url){
      try{
        // Dynamically import qrcode library.
        const mod = await import('https://cdn.jsdelivr.net/npm/qrcode@1.5.4/+esm');
        const dataUrl = await mod.default.toDataURL(url, { margin: 1, width: 260 });
        qrImg.src = dataUrl;
      } catch (e) {
        // Fallback to a simple external QR endpoint if the CDN is blocked.
        qrImg.src = 'https://chart.googleapis.com/chart?chs=300x300&cht=qr&chl=' + encodeURIComponent(url) + '&choe=UTF-8';
      }
    }
    renderQr(shareUrl);

    // vCard generation
    function makeVCard(c){
      let v = `BEGIN:VCARD\nVERSION:3.0\nFN:${c.name}\nORG:${c.company}\nTITLE:${c.role}\n`;
      if (c.phone) v += `TEL;TYPE=WORK,VOICE:${c.phone}\n`;
      v += `EMAIL;TYPE=PREF,INTERNET:${c.email}\nURL:${c.website}\nADR:;;${c.location};;;;\nEND:VCARD`;
      return v;
    }

    document.getElementById('vcardBtn').addEventListener('click', function(){
      const v = makeVCard(card);
      const blob = new Blob([v], {type: 'text/vcard'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = (card.name.replace(/\s+/g,'_') || 'contact') + '.vcf';
      document.body.appendChild(a); a.click(); a.remove();
      setTimeout(()=>URL.revokeObjectURL(url), 1500);
    });

    // Print
    document.getElementById('printBtn').addEventListener('click', ()=> window.print());

    // Print sheet
    document.getElementById('printSheetBtn').addEventListener('click', ()=>{
      window.open('./print-sheet.html', '_blank');
    });

    // Copy link
    document.getElementById('copyLinkBtn').addEventListener('click', async ()=>{
      try {
        await navigator.clipboard.writeText(shareUrl);
        showToast('Link copied!');
      } catch (e) {
        showToast('Copy failed');
      }
    });

    // Copy NFC URL (same as link)
    document.getElementById('copyNfcBtn').addEventListener('click', async ()=>{
      try {
        await navigator.clipboard.writeText(shareUrl);
        showToast('NFC URL copied!');
      } catch (e) {
        alert('Copy failed — ' + shareUrl);
      }
    });

    // Toast for feedback
    function showToast(msg) {
      const toast = document.getElementById('toast');
      toast.textContent = msg;
      toast.classList.add('show');
      clearTimeout(showToast._t);
      showToast._t = setTimeout(() => toast.classList.remove('show'), 1400);
    }

    // Web Share API
    const shareBtn = document.getElementById('shareBtn');
    shareBtn.addEventListener('click', async ()=>{
      if(navigator.share){
        try{ await navigator.share({title: card.name, text: card.role + ' — ' + card.company, url: shareUrl}); }
        catch(e){}
      } else {
        alert('Sharing not supported in this browser — try copying the URL.');
      }
    });

    // Copy link
    document.getElementById('copyLinkBtn').addEventListener('click', async ()=>{
      try {
        await navigator.clipboard.writeText(shareUrl);
        showToast('Link copied');
      } catch (e) {
        showToast('Copy failed');
      }
    });

    // NFC URL (editable but defaults to this page)
    const nfcUrlInput = document.getElementById('nfcUrl');
    nfcUrlInput.value = new URL('/static/business-card.html', location.origin).toString();
    const savedNfcUrl = localStorage.getItem('businessCardNfcUrl');
    if (savedNfcUrl) nfcUrlInput.value = savedNfcUrl;
    nfcUrlInput.addEventListener('change', ()=>{
      const v = (nfcUrlInput.value || '').trim();
      if (!/^https:\/\//i.test(v)) {
        showToast('Enter a valid https:// URL');
        return;
      }
      localStorage.setItem('businessCardNfcUrl', v);
      renderQr(v);
      showToast('NFC URL saved');
    });

    document.getElementById('copyNfcBtn').addEventListener('click', async ()=>{
      try {
        await navigator.clipboard.writeText(nfcUrlInput.value);
        showToast('NFC URL copied');
      } catch (e) {
        showToast('Copy failed');
      }
    });

    // Accessibility: ensure buttons have visible focus
    document.querySelectorAll('a,button').forEach(el=> el.addEventListener('focus', ()=> el.style.outline='2px solid rgba(124,58,237,.9)'));
  </script>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

</body>
</html>
